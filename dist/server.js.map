{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app.js","webpack:///./config.js","webpack:///./utils/browser.js","webpack:///./utils/fetch.js","webpack:///./service.js","webpack:///./utils/logger.js","webpack:///./utils/queue.js","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"@babel/runtime/helpers/toConsumableArray\"","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"axios\"","webpack:///external \"dotenv\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"kue\"","webpack:///external \"path\"","webpack:///external \"puppeteer\"","webpack:///external \"winston\"","webpack:///external \"winston-daily-rotate-file\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","timer","app","express","APP_PORT","process","env","WEB_PORT","APP_HOST","queue","Queue","req","res","next","sendFile","__dirname","milisecons","Number","config","DEFAULT_MILISECONS","console","log","clearInterval","createCycleJob","service","startGetToken","logger","send","error","message","params","listen","dotenv","path","resolve","cwd","Browser","puppeteer","launch","headless","TURN_HEADLESS","browser","newBrowser","newPage","page","url","callback","this","newEmptyPage","inforAccount","Promise","reject","a","isClosed","createPromiseEventOnce","on","evaluate","window","responseLogin","authResponse","accessToken","token","close","waitForSelector","EMAIL_INPUT_SELECTOR","email","type","PASSWORD_INPUT_SELECTOR","password","LOGIN_BUTTON_SELECTOR","buttonLogin","click","ACCEPT_BUTTON_SELECTOR","closeMutilBrowserAndPage","Error","URL_LOGIN_FACEBOOK","getPopupPage","saId","saToken","saTokenExpired","handleAfterLogin","saTokenExpiredDescription","inforAccounts","length","MAX_PAGE","pageForTokens","map","e","createPageToken","all","then","MAX_BROWSER","browserForTokens","createBrowserToken","arr","arrClose","loginError","ERROR_BOX_SELECTOR","buttonAccept","buttonSubmitCheck","CHECK_BUTTON_SELECTOR","selector","event","once","options","axios","response","cycleTime","fetch","URL_GET_INFOR","socialAccounts","Array","from","data","result","filter","saPassword","saLoginName","index","forEach","push","getMultiToken","newInforAccounts","newSocialAccounts","reduce","subArr","concat","update","method","status","JSON","stringify","mess","LOG_DIR","LOG_LEVEL","fs","existsSync","mkdirSync","ignorePrivate","format","info","CONFIG","LOGGING_DATA_OUTPUT","dataOutput","winston","createLogger","levels","warn","verbose","silly","verify","sync","configBackup","configCopy","configUndo","configDelete","dns","login","debug","transports","Console","combine","colorize","simple","level","DailyRotateFile","timestamp","json","maxFiles","maxSize","dirname","datePattern","filename","addColors","kue","createQueue","prefix","redis","port","REDIS_PORT","host","REDIS_HOST","job","done","id","option","priority","save","milliseconds","newProcess","newJob","setInterval","require"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import express from 'express';\nimport service from './service';\nimport config from './config';\n// import axios from 'axios';\nimport Queue from './utils/queue';\nimport logger from './utils/logger';\n\nconst app = new express();\nconst APP_PORT = process.env.WEB_PORT || '8888';\nconst APP_HOST = process.env.APP_HOST || '0.0.0.0';\nconst queue = new Queue();\n\nlet timer;\n\napp.get('/', (req, res, next) => {\n  res.sendFile(__dirname + '/index.html');\n});\n\napp.get('/startGetToken', (req, res, next) => {\n  const milisecons = Number(config.DEFAULT_MILISECONS);\n  console.log(milisecons);\n  \n  try {\n    clearInterval(timer);\n    timer = queue.createCycleJob('get token', service.startGetToken, milisecons);\n    // timer = setInterval(service.startGetToken, milisecons);\n    logger.log('info', 'Start tool Success');\n    res.send('Start Success');\n  } catch (error) {\n    logger.log('error', 'Start tool Fail\\n' + 'Error: ' + error.message);\n    res.send('Start Fail\\n' + 'Error: ' + error.message);\n  }\n});\n\napp.get('/startGetToken/:milisecons', (req, res, next) => {\n  const milisecons = Number(req.params.milisecons) || Number(config.DEFAULT_MILISECONS);\n  console.log(milisecons);\n  try {\n    clearInterval(timer);\n    // timer = setInterval(service.startGetToken, milisecons);\n    timer = queue.createCycleJob('get token', service.startGetToken, milisecons);\n    logger.log('info', 'Start tool Success');\n    res.send('Start Success');\n  } catch(error) {\n    logger.log('error', 'Start tool Fail\\n' + 'Error: ' + error.message);\n    res.send('Start Fail\\n' + 'Error: ' + error.message);\n  }\n});\n\napp.get('/stopGetToken', (req, res, next) => {\n  try {\n    clearInterval(timer);\n    logger.log('info', 'Stop tool Success');\n    res.send('Stop Success');\n  } catch (error) {\n    logger.log('error', 'Stop tool Fail\\n' + 'Error: ' + error.message);\n    res.send('Stop Fail\\n' + 'Error: ' + error.message);\n  }\n});\n\n// app.get('/axios', (req, res, next) => {\n//   try {\n//     clearInterval(timer);\n//     res.send('Stop Success');\n//   } catch (error) {\n//     res.send('Stop Fail\\n' + 'Error: ' + error.message);\n//   }\n// });\n\napp.listen(APP_PORT, APP_HOST, () => {\n  console.log('Facebook-get-token is running on port ' + APP_PORT);\n});\n","import path from 'path'\nimport dotenv from 'dotenv'\nif (process.env.NODE_ENV === \"production\") {\n  dotenv.config({ path: path.resolve(process.cwd(), '.env.production') });\n} else {\n  dotenv.config();\n}\n\nconst config = { ...process.env };\n\nexport default config;\n","import puppeteer from 'puppeteer';\nimport config from '../config';\n\nexport default class Browser {\n\n\tstatic async newBrowser() {\n\t\tconst browser = await puppeteer.launch({ headless: config.TURN_HEADLESS === 'true' });\n\t\treturn browser;\n\t}\n\n\tstatic async newEmptyPage(browser) {\n\t\tif(!browser) {\n\t\t\tbrowser = await Browser.newBrowser();\n\t\t}\n\n\t\tconst page = await browser.newPage();\n\t\treturn page;\n\t}\n\n\tstatic async newPage(url, callback, browser) {\n\t\tif (url) {\n\t\t\tif (!browser) {\n\t\t\t\tbrowser = await Browser.newBrowser();\n\t\t\t}\n\n\t\t\tconst page = await browser.newPage();\n\t\t\tawait page.goto(url);\n\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t}\n\n\t\t\treturn page;\n\t\t}\n\n\t\treturn await this.newEmptyPage(browser);\n\t}\n\n\tstatic async getTokenOnceFull(page, inforAccount) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif(!page) {\n\t\t\t\tpage = await Browser.newEmptyPage();\n\t\t\t}\n\n\t\t\tconst browser = page.browser();\n\n\t\t\tif(inforAccount) {\n\t\t\t\tif(!page.isClosed()){\n\t\t\t\t\tawait page.goto('http://localhost:8888/');\n\n\t\t\t\t  let newPage = await Browser.createPromiseEventOnce(page);\n\n\t\t\t\t  newPage.on('close', async () => {\n\t\t\t\t  \tconsole.log(\"Hello\");\n\t\t\t\t    const token = await page.evaluate(() => {\n\t\t\t\t      return window.responseLogin.authResponse.accessToken;\n\t\t\t\t    });\n\n\t\t\t\t    await page.close().catch(error => console.error(error));\n\t\t\t\t\t\tawait browser.close().catch(error => console.error(error));\n\t\t\t\t    resolve(token);\n\t\t\t\t  })\n\n\t\t\t\t  const email = await Browser.waitForSelector(newPage, config.EMAIL_INPUT_SELECTOR, [browser, page, newPage]);\n\t\t\t\t  await email.type(inforAccount.email || 'test');\n\t\t\t\t  const password = await Browser.waitForSelector(newPage, config.PASSWORD_INPUT_SELECTOR, [browser, page, newPage]);\n\t\t\t\t  await password.type(inforAccount.password || 'test');\n\t\t\t\t  const buttonLogin = await Browser.waitForSelector(newPage, config.LOGIN_BUTTON_SELECTOR, [browser, page, newPage]);\n\t\t\t\t  await buttonLogin.click();\n\n\t\t\t\t  const buttonSubmit = await newPage.waitForSelector(config.ACCEPT_BUTTON_SELECTOR).catch(error => console.error(error));\n\n\t\t\t\t  await newPage.close().catch(error => console.error(error));                 \n\t\t\t\t  \n\t\t\t\t} \n\t\t\t} else {\n\t\t\t\tawait closeMutilBrowserAndPage([browser, page]);\n\t\t\t\tthrow new Error('inforAccount not exists!');\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic async createPageToken(browser, inforAccount) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif(!browser) {\n\t\t\t\treturn ;\n\t\t\t}\n\n\t\t\tif (inforAccount.email && inforAccount.password) {\n\t\t\t\tconst page = await browser.newPage();\n\n\t\t\t\tif(!page.isClosed()){\n\t\t\t\t\tawait page.goto(config.URL_LOGIN_FACEBOOK);\n\n\t\t\t\t  let newPage = await Browser.getPopupPage(page);\n\n\t\t\t\t  newPage.on('close', async () => {\n\t\t\t\t    const token = await page.evaluate(() => {\n\t\t\t\t      return window.responseLogin.authResponse.accessToken;\n\t\t\t\t\t\t}).catch (error => console.log('Error in newPage.on(\"close\") event'));\n\n\t\t\t\t    await page.close().catch(error => console.log('Error to close page'));\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (token)\n\t\t\t\t\t\t\tresolve({ saId: inforAccount.saId, saToken: token, saTokenExpired: 0 });\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconsole.log('Something wrong when get token from main Page, please try get token again');\n\t\t\t\t\t\t\tresolve({ saId: inforAccount.saId, saTokenExpired: 1 });\n\t\t\t\t\t\t}\n\t\t\t\t  })\n\n\t\t\t\t  const email = await Browser.waitForSelector(newPage, config.EMAIL_INPUT_SELECTOR, [page, newPage]);\n\t\t\t\t  await email.type(inforAccount.email);\n\t\t\t\t  const password = await Browser.waitForSelector(newPage, config.PASSWORD_INPUT_SELECTOR, [page, newPage]);\n\t\t\t\t  await password.type(inforAccount.password);\n\t\t\t\t  const buttonLogin = await Browser.waitForSelector(newPage, config.LOGIN_BUTTON_SELECTOR, [page, newPage]);\n\t\t\t\t  await buttonLogin.click();\n\t\t\t\t\t\n\t\t\t\t\tBrowser.handleAfterLogin(page, newPage).catch(error => {\n\t\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t\t\tresolve({ saId: inforAccount.saId, saTokenExpired: 3, saTokenExpiredDescription: error.message });\n\t\t\t\t\t});\n\n\t\t\t\t} \n\t\t\t} else {\n\t\t\t\tawait closeMutilBrowserAndPage([page]);\n\t\t\t\treturn ;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstatic async createBrowserToken(inforAccounts) {\n\t\tconst length = inforAccounts.length;\n\t\tif(length > Number(config.MAX_PAGE)){\n\t\t\treturn ;\n\t\t}\n\t\tconst browser = await Browser.newBrowser();\n\n\t\tconst pageForTokens = inforAccounts.map(e => Browser.createPageToken(browser, e));\n\n\t\treturn Promise.all(pageForTokens).then(async res => {\n\t\t\tawait browser.close().catch(error => console.log('error to close browser'));\n\n\t\t\treturn res;\n\t\t});\n\t}\n\n\tstatic getMultiToken(inforAccounts) {\n\t\tconst length = inforAccounts.length;\n\n\t\tif (length > Number(config.MAX_BROWSER)){\n\t\t\treturn ;\n\t\t}\n\n\t\tconst browserForTokens = inforAccounts.map(e => Browser.createBrowserToken(e));\n\n\t\treturn Promise.all(browserForTokens);\n\t}\n\n\tstatic closeMutilBrowserAndPage(arr) {\n\t\tif(arr) {\n\t\t\tconst arrClose = arr.map(e => e.close().catch(error => {console.log('error to close mutil Browser and Page')}));\n\n\t\t\treturn Promise.all(arrClose);\n\t\t}\n\t}\n\n\tstatic async handleAfterLogin_old(page, newPage) {\n\t\tconst loginError = newPage.waitForSelector(config.ERROR_BOX_SELECTOR).catch(error => console.log('Error to get Error Login box'));\n\t\tconst buttonAccept = newPage.waitForSelector(config.ACCEPT_BUTTON_SELECTOR).catch(error => console.log('Error to get buttonAccept'));\n\t\tconst buttonSubmitCheck = newPage.waitForSelector(config.CHECK_BUTTON_SELECTOR).catch(error => console.log('Error to get buttonSubmitCheck'));\n\n\t\tconst res = await Promise.all([loginError, buttonSubmitCheck, buttonAccept]);\n\n\t\tif(res[0]) {\n\t\t\tawait Browser.closeMutilBrowserAndPage([page, newPage]).catch(error => console.log('Error to close mutil page and newpage'));\n\t\t\tthrow new Error('Login Error, wrong infor login!')\n\t\t} else {\n\t\t\tif (res[1]) {\n\t\t\t\tawait Browser.closeMutilBrowserAndPage([page, newPage]).catch(error => console.log('Error to close mutil page and newpage'));\n\t\t\t\tthrow new Error('Login Succes but occur checkpoint!')\n\t\t\t} else {\n\t\t\t\tif (res[2]) {\n\t\t\t\t\tawait buttonAccept.click().catch(error => console.log('Error to click buttonAccept'));\n\t\t\t\t}\n\n\t\t\t\tawait newPage.close().catch(error => console.log('Error to close newPage'));\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic async handleAfterLogin(page, newPage) {\n\t\tconst loginError = newPage.waitForSelector(config.ERROR_BOX_SELECTOR).catch(error => console.log('Error to get Error Login box')).then(res => {\n\t\t\tif (res) {\n\t\t\t\tBrowser.closeMutilBrowserAndPage([page, newPage]).catch(error => console.log('Error to close mutil page and newpage'));\n\t\t\t\tthrow new Error('Login Error, wrong infor login!');\n\t\t\t}\n\t\t});\n\t\tconst buttonAccept = newPage.waitForSelector(config.ACCEPT_BUTTON_SELECTOR).catch(error => console.log('Error to get buttonAccept')).then(async res => {\n\t\t\tif (res) {\n\t\t\t\tawait res.click().catch(error => console.log('Error to click buttonAccept'));\n\t\t\t}\n\n\t\t\tawait newPage.close().catch(error => console.log('Error to close newPage'));\n\t\t});\n\t\tconst buttonSubmitCheck = newPage.waitForSelector(config.CHECK_BUTTON_SELECTOR).catch(error => console.log('Error to get buttonSubmitCheck')).then(res => {\n\t\t\tif (res) {\n\t\t\t\tBrowser.closeMutilBrowserAndPage([page, newPage]).catch(error => console.log('Error to close mutil page and newpage'));\n\t\t\t\tthrow new Error('Login Succes but occur checkpoint!')\n\t\t\t}\n\t\t});\n\n\t\treturn Promise.all([loginError, buttonSubmitCheck, buttonAccept]);\n\t}\n\n\tstatic waitForSelector(page, selector, arr) {\n\t\treturn page.waitForSelector(selector)\n\t\t.catch(async error => {\n\t\t\tawait Browser.closeMutilBrowserAndPage(arr);\n\t\t});\n\t}\n\n\tstatic createPromiseEventOnce(event, page, callback) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (event && page) {\n\t\t\t\tpage.once(event, res => {\n\t\t\t\t\tif(callback) {\n\t\t\t\t\t\tcallback(res);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tresolve(res)\n\t\t\t\t});\n\t\t\t} else reject(new Error('event or page are undefined'));\n\t\t});\n\t}\t\n\n\tstatic getPopupPage(page, callback) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(page) {\n\t\t\t\tpage.once('popup', res => {\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tcallback(res);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(res)\n\t\t\t\t});\n\t\t\t} else reject(new Error('page is undefined'));\n\t\t});\n\t}\n\n}","import axios from 'axios';\n\nexport default (url, options) => {\n  return axios.get(url, {\n    ...options\n  })\n    .then(function (response) {\n\n      return Promise.resolve(response);\n    })\n    .catch(function (error) {\n      \n      return Promise.reject(error);\n    });\n}\n","import Browser from './utils/browser';\nimport fetch from './utils/fetch';\nimport axios from 'axios';\nimport config from './config';\nimport logger from './utils/logger';\n\nexport default {\n\tstartGetToken: async (cycleTime) => {\n\t\tlet socialAccounts = await fetch(config.URL_GET_INFOR + '/get/all');\n\t\t// console.log(socialAccounts);\n\t\tsocialAccounts = Array.from(socialAccounts.data.result);\n\t\tsocialAccounts = socialAccounts.filter(e => e.saPassword && e.saLoginName && e.saTokenExpired != 0 && e.saTokenExpired != 3).map(e => { return { password: e.saPassword, email: e.saLoginName, saId: e.saId } });\n\n\t\t// console.log(socialAccounts);\n\t\tconst inforAccounts = []\n\n\t\tconst MAX_PAGE = Number(config.MAX_PAGE);\n\t\tlet index = -1;\n\t\tsocialAccounts.forEach((e, i) => {\n\t\t\tif (i % 5 === 0) {\n\t\t\t\tinforAccounts.push([e]);\n\t\t\t\tindex++;\n\t\t\t} else {\n\t\t\t\tinforAccounts[index].push(e);\n\t\t\t}\n\t\t});\n\n\t\tconst newInforAccounts = Array.from(await Browser.getMultiToken(inforAccounts));\n\t\tconst newSocialAccounts = newInforAccounts.reduce((arr, subArr) => arr.concat(...subArr), []).map(e => {\n\t\t\tconst update = {};\n\t\t\tif (e.saTokenExpired == 3) {\n\t\t\t\tupdate.saTokenExpiredDescription = e.saTokenExpiredDescription;\n\t\t\t} else {\n\t\t\t\tupdate.saToken = e.saToken;\n\t\t\t}\n\n\t\t\treturn [e.saId, { ...update, saTokenExpired: e.saTokenExpired }];\n\t\t});\n\n\t\tif (newSocialAccounts.length !== 0) {\n\t\t\tconst response = await axios({ url: config.URL_GET_INFOR + '/updateToken', method: 'post', data: { newSocialAccounts } });\n\t\t\t// console.log(response.data);\n\t\t\tlogger.log('info', 'Data input: ' + response.status + '\\nDate response: ' + JSON.stringify(newSocialAccounts));\n\t\t\t// console.log(response.data);\n\t\t\tlogger.log('info', 'AXIOS status response: ' + response.status + '\\nDate response: ' + JSON.stringify(Array.from(response.data.result).map((e, i) => { return {saId: newSocialAccounts[i], status: e, mess: e ? 'succes' : 'error' }})));\n\t\t\tconsole.log('AXIOS status response: ', response.status);\n\t\t} else {\n\t\t\tlogger.log('info', 'All accounts don\\'t need to get token or can\\'t get token!');\n\t\t\tconsole.log('All accounts don\\'t need to get token or can\\'t get token!');\n\t\t}\n\t\t\n\t}\n}","import fs from 'fs';\nimport winston, { format } from 'winston';\n\nimport CONFIG from '../config';\n\nimport 'winston-daily-rotate-file';\n\n\n// Use LOG_DIR from env\nconst LOG_DIR = process.env.LOG_DIR || 'logs';\nconst LOG_LEVEL = process.env.LOG_LEVEL || 'debug';\n\n// Create log directory if it does not exist\nif (!fs.existsSync(LOG_DIR)) {\n  fs.mkdirSync(LOG_DIR);\n}\n\n// Ignore log messages if they have { private: true }\nconst ignorePrivate = format((info/* , opts */) => {\n  // console.log(\"info: %o \\n opts: %o\", info, opts)\n  if (info.private) { return false; }\n  if (CONFIG.LOGGING_DATA_OUTPUT === 'false')\n    delete info.dataOutput;\n\n  return info;\n});\n\n/**\n * Create a new winston logger.\n */\nconst logger = winston.createLogger({\n  levels: {\n    error: 0,\n    warn: 1,\n    info: 2,\n    verbose: 3,\n    silly: 4,\n    verify: 5,\n    sync: 6,\n    config: 7,\n    configBackup: 8,\n    configCopy: 9,\n    configUndo: 10,\n    configDelete: 11,\n    dns: 12,\n    login: 13,\n    debug: 14,\n  },\n  transports: [\n    new winston.transports.Console({\n      format: format.combine(format.colorize(), ignorePrivate(), format.simple()),\n      level: 'info'\n    }),\n    new winston.transports.DailyRotateFile({\n      format: format.combine(format.timestamp(), ignorePrivate(), format.json()),\n      maxFiles: '15d',\n      maxSize: '1mb',\n      level: LOG_LEVEL,\n      dirname: LOG_DIR,\n      datePattern: 'YYYY-MM-DD',\n      filename: '%DATE%-log.json'\n    })\n  ]\n});\n\nconst colors = {\n  verbose: 'white',\n  info: 'green',\n  warn: 'yellow',\n  error: 'red',\n  debug: 'white',\n  silly: 'white',\n  verify: 'brown',\n  sync: 'chocolate',\n  config: 'gold',\n  configCopy: 'gray',\n  configUndo: 'greenYellow',\n  configDelete: 'indianRed',\n  dns: 'lavender',\n  configBackup: 'bisque',\n  login: 'cadetblue'\n};\n\nwinston.addColors(colors);\n\n\nexport const logStream = {\n  /**\n   * A writable stream for winston logger.\n   *\n   * @param {any} message\n   */\n  write(message) {\n    logger.info(message.toString());\n  }\n};\n\nexport default logger;\n","import kue from 'kue';\nimport logger from './logger';\nimport config from '../config';\n\nexport default class Queue {\n  constructor() {\n    this.queue = kue.createQueue({\n      prefix: 'q',\n      redis: {\n        port: config.REDIS_PORT,\n        host: config.REDIS_HOST,\n        // db: 3, // if provided select a non-default redis db\n        options: {\n          // see https://github.com/mranney/node_redis#rediscreateclient\n        }\n      }\n    });\n  }\n\n  newProcess(name, callback) {\n    if(name && callback) {\n      this.queue.process(name, function (job, done) {\n        /* carry out all the job function here */\n        console.log(\"process job: \", job.id)\n        logger.log('info', \"process job: \" + job.id);\n        callback && callback().then(res => done()).catch(error => {\n          logger.log('error', 'Callback in queue fail\\n' + 'Error: ' + error.message);\n          done(error)\n        });\n      });\n    }\n  }\n\n  newJob(name, option) {\n    if(name){\n      const { priority } = option || {};\n\n      const job = this.queue.create(name, {\n        name: name,\n      }).priority(priority || 'normal');\n\n      job\n        .on('complete', function () {\n          logger.log('info', 'Job ' + job.id + ' with name ' + job.data.name + ' is done');\n          console.log('Job', job.id, 'with name ', job.data.name, ' is done');\n        })\n        .on('failed', function () {\n          logger.log('info', 'Job ' + job.id + ' with name ' + job.data.name + ' has failed');\n          console.log('Job ', job.id, ' with name ', job.data.name, ' has failed');\n        })\n\n      job.save();\n\n      return job;\n    }\n  }\n\n  createCycleJob(name, callback, milliseconds, option) {\n    if(name && callback) {\n      this.newProcess(name, callback);\n\n      const newJob = this.newJob.bind(this);\n\n      const timer = setInterval(function () {\n        newJob(name, option);\n      }, milliseconds);\n\n      return timer;\n    }\n  }\n}\n\n\n","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/createClass\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"axios\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"kue\");","module.exports = require(\"path\");","module.exports = require(\"puppeteer\");","module.exports = require(\"winston\");","module.exports = require(\"winston-daily-rotate-file\");"],"sourceRoot":""}